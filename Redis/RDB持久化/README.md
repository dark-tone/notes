# RDB持久化
RDB持久化功能所生成的RDB文件是一个经过压缩的二进制文件，保存的是数据库状态（键值对信息）。

## RDB文件的创建与载入
#### 创建
- SAVE：会阻塞
- BGSAVE：会派生子进程进行创建

两者均调用rdbSave函数来进行文件生成。<br>
可通过配置save选项来根据条件间隔性生成RDB文件（使用BGSAVE）。

#### 载入
在服务器启动时自动载入，会阻塞主进程。
> 如果服务器开启了AOF功能，会优先使用AOF持久化功能。<br>
> 只有在AOF关闭，服务器才会使用RDB文件还原数据库状态。

#### 命令冲突
- BGSAVE执行时，客户端发送的BGREWRITEAOF会延迟至BGSAVE完成之后执行。
- BGSAVE执行时，SAVE命令和BGSAVE命令会被拒绝。（防止产生竞争条件）
- BGREWRITEAOF执行时，BGSAVE命令会被拒绝。（性能考虑，两者都会启动子进程，执行大量的磁盘写入操作）

## RDB文件结构
（略）