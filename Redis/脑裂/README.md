## 概念
主从服务器之间网络出现问题，导致从库升级为了主库，出现多个主库的情况。

为防止脑裂问题，集群的数量一般配置为**奇数**。

## 例子
一主两从，主服务器与客户端通信正常，与从服务器断连。哨兵判断主服务器离线，于是升级其中一个从库为主库，此时出现两个主库，由于原主库与客户端通信正常，写请求一直由原主库处理。当网络通畅后，原主库降为从库，此时清空原主库数据导致数据丢失。

## 解决方案
添加配置，使网络出现问题时原主库拒绝执行请求。
```
min-slaves-to-write 3
min-slaves-max-lag 10

min-replicas-to-write 3
min-replicas-max-lag 10
```

min-slaves-to-write 1，要求至少有一个slave。

min-slaves-max-lag 10，主从数据同步超时时间，10秒。

以上两个配置，都不满足就会导致master拒绝接受客户端请求。根据以上配置可以将master通信异常期间的数据丢失控制在10秒以内。

## 参考资料
[Redis脑裂问题](https://www.jianshu.com/p/985ae6fa6a4b)